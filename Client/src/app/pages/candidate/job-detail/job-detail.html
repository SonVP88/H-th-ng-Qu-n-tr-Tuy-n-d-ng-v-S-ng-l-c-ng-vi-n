<header
    class="sticky top-0 z-50 w-full bg-white/80 dark:bg-[#101622]/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
    <div class="px-4 md:px-10 lg:px-40 flex items-center justify-between py-3">
        <div class="flex items-center gap-4 text-[#0d121b] dark:text-white">
            <div class="size-8 text-primary">
                <svg class="w-full h-full" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd"
                        d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z"
                        fill="currentColor" fill-rule="evenodd"></path>
                    <path clip-rule="evenodd"
                        d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z"
                        fill="currentColor" fill-rule="evenodd"></path>
                </svg>
            </div>
            <h2 class="text-xl font-bold tracking-tight">JobPortal</h2>
        </div>
        <div class="hidden md:flex items-center gap-9">
            <a class="text-sm font-medium hover:text-primary transition-colors" [routerLink]="['/candidate/home']">Tìm
                việc làm</a>
            <a class="text-sm font-medium hover:text-primary transition-colors" [routerLink]="['/candidate/home']">Công
                ty</a>
            <a class="text-sm font-medium hover:text-primary transition-colors"
                [routerLink]="['/candidate/my-applications']">Hồ sơ của tôi</a>
        </div>
        <div class="flex items-center gap-4">
            <div class="hidden sm:flex items-center gap-3">
                <!-- Notification Icon -->
                <button class="relative p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors">
                    <span class="material-symbols-outlined text-slate-600 dark:text-slate-400">notifications</span>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>

                <!-- User Avatar/Menu -->
                <div
                    class="flex items-center gap-2 p-1 pr-3 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg cursor-pointer transition-colors">
                    <div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-primary text-xl">person</span>
                    </div>
                </div>
            </div>

            <button class="md:hidden text-slate-800 dark:text-white">
                <span class="material-symbols-outlined">menu</span>
            </button>
        </div>
    </div>
</header>

<main class="flex-grow py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto space-y-6">
        <nav class="flex text-sm text-slate-500 mb-2">
            <a class="hover:text-primary flex items-center gap-1" (click)="goBack()" style="cursor: pointer;">
                <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                Quay lại
            </a>
        </nav>

        <div *ngIf="loading" class="animate-pulse space-y-6">
            <div class="h-48 bg-slate-200 rounded-xl w-full"></div>
            <div class="grid grid-cols-3 gap-6">
                <div class="col-span-2 h-96 bg-slate-200 rounded-xl"></div>
                <div class="col-span-1 h-96 bg-slate-200 rounded-xl"></div>
            </div>
        </div>

        <div *ngIf="error && !loading"
            class="flex flex-col items-center justify-center py-20 bg-white rounded-xl shadow-card">
            <div class="w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-4">
                <span class="material-symbols-outlined text-3xl">error_outline</span>
            </div>
            <h3 class="text-xl font-bold text-slate-900">{{ error }}</h3>
            <p class="text-slate-500 mt-2">The job you are looking for might have been removed or expired.</p>
            <button (click)="goBack()"
                class="mt-6 px-6 py-2.5 bg-slate-100 text-slate-700 font-semibold rounded-lg hover:bg-slate-200 transition-colors">
                Xem tất cả việc làm
            </button>
        </div>

        <div *ngIf="job && !loading && !error" class="bg-white dark:bg-[#1a2333] rounded-xl shadow-card p-6 md:p-8">
            <div class="flex flex-col md:flex-row justify-between gap-6">
                <div class="flex-1 space-y-4">
                    <div class="flex items-start gap-4">
                        <div
                            class="size-16 shrink-0 rounded-lg bg-slate-100 flex items-center justify-center overflow-hidden border border-slate-200">
                            <img alt="TechSoft Solutions logo with stylized initials on a colorful background"
                                class="w-full h-full object-cover"
                                src="https://lh3.googleusercontent.com/aida-public/AB6AXuAzgUcIdNKxjBHAh7nRBgd1ic0OEdv7y-JUQK_zPAu_WJRI9ytWWkvfVwT_Tw7d0GZ7-eRv2Gua27aIuhRncn2j71jkY1bffoUuwgvTdVUkwrVoRAAf8CATclWxta5ALWliuKr94V6lSz8MfupuNHukSepD5QY5CU-XKa3NVQzZD9JdZTOv0PO65fgeogjNKz1BxvtmzJGf3Z9RMWL6N5Ir7xCQQ-4IqTdBKQBL6bWamqgteOwvVC4-YCSDU5iBgxJN1kK8RJ9ssg_j" />
                        </div>
                        <div>
                            <h1 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white leading-tight">
                                {{ job.title }}
                            </h1>
                            <div
                                class="flex flex-wrap items-center gap-x-4 gap-y-2 mt-2 text-slate-500 dark:text-slate-400 text-sm font-medium">
                                <span class="flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[18px]">business</span>
                                    {{ job.companyName }}
                                </span>
                                <span class="hidden sm:inline text-slate-300">•</span>
                                <span class="flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[18px]">location_on</span>
                                    {{ job.location || 'Làm việc từ xa' }}
                                </span>
                                <span class="hidden sm:inline text-slate-300">•</span>
                                <span class="flex items-center gap-1 text-emerald-600 dark:text-emerald-400">
                                    <span class="material-symbols-outlined text-[18px]">schedule</span>
                                    Đăng {{ getDaysAgo(job.createdDate) }}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 pt-1 pl-0 md:pl-20">
                        <span *ngIf="job.employmentType"
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-100 dark:border-blue-800">
                            {{ job.employmentType }}
                        </span>
                        <span *ngIf="job.location"
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 border border-slate-200 dark:border-slate-700">
                            {{ job.location }}
                        </span>
                    </div>
                </div>
                <div class="flex flex-col items-start md:items-end justify-between gap-4 md:min-w-[280px]">
                    <div class="text-left md:text-right">
                        <p class="text-sm text-slate-500 font-medium mb-1">Mức lương</p>
                        <h2 class="text-2xl md:text-3xl font-bold text-primary tracking-tight">
                            {{ formatSalary(job.salaryMin, job.salaryMax) }}
                        </h2>
                    </div>
                    <div class="flex items-center gap-3 w-full md:w-auto">
                        <button
                            class="size-12 flex items-center justify-center rounded-xl border border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary transition-colors bg-white dark:bg-transparent"
                            title="Lưu công việc">
                            <span class="material-symbols-outlined">bookmark_border</span>
                        </button>
                        <button
                            class="flex-1 md:flex-none px-8 h-12 bg-primary hover:bg-primary-dark text-white rounded-xl font-bold text-base shadow-lg shadow-blue-500/20 hover:shadow-blue-500/30 transition-all flex items-center justify-center gap-2"
                            (click)="openApplyModal()">
                            <span>Ứng tuyển ngay</span>
                            <span class="material-symbols-outlined text-[20px]">arrow_forward</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white dark:bg-[#1a2333] rounded-xl shadow-card p-6 md:p-8">
                    <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                        <span class="w-1 h-6 bg-primary rounded-full"></span>
                        Mô tả công việc
                    </h3>
                    <div
                        class="prose prose-slate dark:prose-invert max-w-none text-slate-600 dark:text-slate-300 leading-relaxed">
                        <!-- Description -->
                        <div *ngIf="job?.description" [innerHTML]="job?.description"></div>
                        <div *ngIf="!job?.description" class="text-slate-500 italic">Chưa có mô tả</div>

                        <!-- Requirements (optional) -->
                        <div *ngIf="job?.requirements" class="mt-8">
                            <h4 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Yêu cầu</h4>
                            <div [innerHTML]="job?.requirements"></div>
                        </div>

                        <!-- Benefits (optional) -->
                        <div *ngIf="job?.benefits" class="mt-8">
                            <h4 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Quyền lợi</h4>
                            <div [innerHTML]="job?.benefits"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="lg:col-span-1 space-y-6">
                <div class="sticky top-24 space-y-6">
                    <div class="bg-white dark:bg-[#1a2333] rounded-xl shadow-card p-6">
                        <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Tổng quan công việc</h3>
                        <div class="space-y-5">
                            <div class="flex items-start gap-4">
                                <div
                                    class="size-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0 text-slate-500">
                                    <span class="material-symbols-outlined text-[20px]">calendar_today</span>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 font-medium uppercase tracking-wider">Ngày đăng
                                    </p>
                                    <p class="text-slate-900 dark:text-white font-semibold">{{
                                        formatDate(job?.createdDate) }}</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div
                                    class="size-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0 text-slate-500">
                                    <span class="material-symbols-outlined text-[20px]">hourglass_empty</span>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 font-medium uppercase tracking-wider">Hạn nộp</p>
                                    <p class="text-slate-900 dark:text-white font-semibold">{{ formatDate(job?.deadline)
                                        }}</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div
                                    class="size-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0 text-slate-500">
                                    <span class="material-symbols-outlined text-[20px]">work_history</span>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 font-medium uppercase tracking-wider">Kinh nghiệm
                                    </p>
                                    <p class="text-slate-900 dark:text-white font-semibold">3 - 5 năm</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div
                                    class="size-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center shrink-0 text-slate-500">
                                    <span class="material-symbols-outlined text-[20px]">layers</span>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 font-medium uppercase tracking-wider">Cấp bậc</p>
                                    <p class="text-slate-900 dark:text-white font-semibold">Senior</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 pt-6 border-t border-slate-100 dark:border-slate-800">
                            <p class="text-xs text-slate-500 font-medium uppercase tracking-wider mb-3">Kỹ năng yêu cầu
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span *ngFor="let skill of job?.skills"
                                    class="px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium">
                                    {{ skill }}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-[#1a2333] rounded-xl shadow-card p-6">
                        <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Thông tin liên hệ</h3>
                        <div class="flex items-center gap-4 mb-4">
                            <div
                                class="size-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden">
                                <img alt="HR Manager avatar placeholder" class="w-full h-full object-cover"
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuCmY9w5lR8BcjLEquEha6qscPHH9u9QAe7acmN3CeeU879qTI_chhPlyPu2cD7HGJyHuh-4eI3lgDulqx5nC4oK2v_aMfiY5bl4UnuoZX3jCZunxJ4ur-y8butcOqQdP9kt_Y5PsoudsKQi9acYbAKXclNYlWKE_1HFxZlZ3bC980gMAMsm2DoIg0gCpYbsRJCFqmcNY64JSeyRcDNH3DB1FwS_nCcP6nO9XKr9_Neeg26XTUK5kG3I8ng5yWJFS0yOkPDjBVw3FrzJ" />
                            </div>
                            <div>
                                <p class="text-slate-900 dark:text-white font-bold">Sarah Nguyen</p>
                                <p class="text-xs text-slate-500">Quản lý nhân sự</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <a *ngIf="job?.contactEmail" [href]="'mailto:' + job?.contactEmail"
                                class="flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group">
                                <span
                                    class="material-symbols-outlined text-slate-400 group-hover:text-primary">email</span>
                                <span
                                    class="text-sm text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white truncate">
                                    {{ job?.contactEmail }}
                                </span>
                            </a>
                            <a class="flex items-center gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group"
                                href="#">
                                <span
                                    class="material-symbols-outlined text-slate-400 group-hover:text-primary">language</span>
                                <span
                                    class="text-sm text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white truncate">www.techsoft.com</span>
                            </a>
                        </div>
                        <button
                            class="w-full mt-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors">
                            Xem hồ sơ công ty
                        </button>
                    </div>
                    <div
                        class="bg-gradient-to-br from-primary to-blue-700 rounded-xl shadow-card p-6 text-white relative overflow-hidden">
                        <div class="absolute -right-10 -top-10 size-40 bg-white/10 rounded-full blur-2xl"></div>
                        <h3 class="text-lg font-bold mb-2 relative z-10">Được kết nối!</h3>
                        <p class="text-blue-100 text-sm mb-4 relative z-10">Tải CV của bạn để nhà tuyển dụng tìm thấy
                            bạn.
                        </p>
                        <button
                            class="w-full py-2.5 bg-white text-primary rounded-lg text-sm font-bold hover:bg-blue-50 transition-colors relative z-10">
                            Tải CV lên
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Apply Modal -->
    <div *ngIf="isModalOpen" class="fixed inset-0 z-50 overflow-y-auto" (click)="closeModal()">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"></div>

        <!-- Modal Container -->
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative w-full max-w-3xl bg-white dark:bg-slate-900 rounded-2xl shadow-2xl transform transition-all"
                (click)="$event.stopPropagation()">

                <!-- Modal Header -->
                <div
                    class="sticky top-0 z-10 bg-gradient-to-r from-primary to-blue-600 rounded-t-2xl px-6 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="size-10 bg-white/20 rounded-lg flex items-center justify-center">
                            <span class="material-symbols-outlined text-white text-xl">work</span>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Nộp Hồ Sơ Ứng Tuyển</h2>
                            <p class="text-sm text-blue-100" *ngIf="job">{{ job.title }}</p>
                        </div>
                    </div>
                    <button (click)="closeModal()"
                        class="size-10 flex items-center justify-center rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>

                <!-- Modal Body -->
                <div class="max-h-[calc(100vh-200px)] overflow-y-auto p-6">
                    <!-- Success Message -->
                    <div *ngIf="submitSuccess"
                        class="mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start gap-3">
                        <span
                            class="material-symbols-outlined text-green-600 dark:text-green-400 text-2xl">check_circle</span>
                        <div class="flex-1">
                            <h4 class="font-bold text-green-900 dark:text-green-100 mb-1">Nộp hồ sơ thành công!</h4>
                            <p class="text-sm text-green-700 dark:text-green-300">Cảm ơn bạn đã ứng tuyển. Chúng tôi sẽ
                                xem xét hồ sơ và liên hệ với bạn sớm nhất.</p>
                        </div>
                        <button (click)="closeModal()"
                            class="text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </div>

                    <!-- Error Message -->
                    <div *ngIf="submitError"
                        class="mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3">
                        <span class="material-symbols-outlined text-red-600 dark:text-red-400 text-2xl">error</span>
                        <div class="flex-1">
                            <h4 class="font-bold text-red-900 dark:text-red-100 mb-1">Có lỗi xảy ra</h4>
                            <p class="text-sm text-red-700 dark:text-red-300">{{ submitError }}</p>
                        </div>
                    </div>

                    <!-- Application Form -->
                    <form [formGroup]="applyForm" (ngSubmit)="onSubmitApply()" class="space-y-6">
                        <!-- Personal Information -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2">
                                <span class="w-1 h-6 bg-primary rounded-full"></span>
                                Thông Tin Cá Nhân
                            </h3>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Full Name -->
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Họ và Tên <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" formControlName="fullName" placeholder="Nguyễn Văn A"
                                        class="w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                                        [class.border-red-500]="applyForm.get('fullName')?.invalid && applyForm.get('fullName')?.touched">
                                    <p *ngIf="applyForm.get('fullName')?.invalid && applyForm.get('fullName')?.touched"
                                        class="mt-1 text-sm text-red-600 dark:text-red-400">
                                        Vui lòng nhập họ tên
                                    </p>
                                </div>

                                <!-- Email -->
                                <div>
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Email <span class="text-red-500">*</span>
                                    </label>
                                    <input type="email" formControlName="email" placeholder="example@email.com"
                                        class="w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                                        [class.border-red-500]="applyForm.get('email')?.invalid && applyForm.get('email')?.touched">
                                    <p *ngIf="applyForm.get('email')?.invalid && applyForm.get('email')?.touched"
                                        class="mt-1 text-sm text-red-600 dark:text-red-400">
                                        Vui lòng nhập email hợp lệ
                                    </p>
                                </div>

                                <!-- Phone -->
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Số Điện Thoại <span class="text-red-500">*</span>
                                    </label>
                                    <input type="tel" formControlName="phone" placeholder="0123456789"
                                        class="w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
                                        [class.border-red-500]="applyForm.get('phone')?.invalid && applyForm.get('phone')?.touched">
                                    <p *ngIf="applyForm.get('phone')?.invalid && applyForm.get('phone')?.touched"
                                        class="mt-1 text-sm text-red-600 dark:text-red-400">
                                        Vui lòng nhập số điện thoại
                                    </p>
                                </div>

                                <!-- Introduction -->
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                                        Giới Thiệu Bản Thân
                                    </label>
                                    <textarea formControlName="introduction" rows="3"
                                        placeholder="Hãy cho chúng tôi biết về kinh nghiệm, kỹ năng và lý do bạn phù hợp với vị trí này..."
                                        class="w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"></textarea>
                                    <p class="mt-1 text-xs text-slate-500">Tối đa 2000 ký tự</p>
                                </div>
                            </div>
                        </div>

                        <!-- CV Upload -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2">
                                <span class="w-1 h-6 bg-primary rounded-full"></span>
                                Tải Lên CV <span class="text-red-500 text-base">*</span>
                            </h3>

                            <!-- Drag & Drop Zone -->
                            <div class="relative border-2 border-dashed rounded-xl p-6 text-center transition-all"
                                [class.border-primary]="isDragging" [class.bg-primary/5]="isDragging"
                                [class.border-slate-300]="!isDragging" [class.dark:border-slate-600]="!isDragging"
                                (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
                                (drop)="onFileDrop($event)">

                                <!-- File Selected State -->
                                <div *ngIf="selectedFile"
                                    class="flex items-center justify-between gap-4 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg">
                                    <div class="flex items-center gap-3 flex-1 min-w-0">
                                        <div
                                            class="size-10 bg-primary/10 rounded-lg flex items-center justify-center shrink-0">
                                            <span
                                                class="material-symbols-outlined text-primary text-xl">description</span>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="font-semibold text-slate-900 dark:text-white truncate text-sm">{{
                                                selectedFileName }}</p>
                                            <p class="text-xs text-slate-500">{{ (selectedFile.size / 1024 /
                                                1024).toFixed(2) }} MB</p>
                                        </div>
                                    </div>
                                    <button type="button" (click)="removeFile()"
                                        class="size-8 flex items-center justify-center rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors shrink-0">
                                        <span class="material-symbols-outlined text-xl">close</span>
                                    </button>
                                </div>

                                <!-- Upload State -->
                                <div *ngIf="!selectedFile">
                                    <div
                                        class="size-14 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3">
                                        <span
                                            class="material-symbols-outlined text-slate-400 text-2xl">cloud_upload</span>
                                    </div>
                                    <h4 class="text-base font-bold text-slate-900 dark:text-white mb-2">Kéo thả file CV
                                        vào đây</h4>
                                    <p class="text-sm text-slate-500 mb-3">hoặc</p>
                                    <label
                                        class="inline-flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-lg font-semibold cursor-pointer transition-all text-sm">
                                        <span class="material-symbols-outlined text-lg">upload_file</span>
                                        <span>Chọn File</span>
                                        <input type="file" class="hidden" accept=".pdf,.doc,.docx"
                                            (change)="onFileSelected($event)">
                                    </label>
                                    <p class="text-xs text-slate-500 mt-3">Chấp nhận: PDF, DOC, DOCX (Tối đa 5MB)</p>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div
                            class="flex items-center justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700">
                            <button type="button" (click)="closeModal()"
                                class="px-6 py-2.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-all">
                                Hủy
                            </button>
                            <button type="submit" [disabled]="isSubmitting"
                                class="px-6 py-2.5 bg-primary hover:bg-primary-dark text-white rounded-lg font-semibold shadow-lg shadow-blue-500/20 hover:shadow-blue-500/30 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                                <span *ngIf="!isSubmitting">Gửi Hồ Sơ</span>
                                <span *ngIf="isSubmitting">Đang gửi...</span>
                                <span class="material-symbols-outlined text-lg" *ngIf="!isSubmitting">send</span>
                                <span class="material-symbols-outlined animate-spin text-lg"
                                    *ngIf="isSubmitting">progress_activity</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-white dark:bg-[#151b2b] border-t border-slate-200 dark:border-slate-800 mt-12 py-10">
        <div
            class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6">
            <p class="text-slate-500 text-sm">© 2024 JobPortal. All rights reserved.</p>
            <div class="flex gap-6">
                <a class="text-slate-400 hover:text-primary transition-colors" href="#">Chính sách bảo mật</a>
                <a class="text-slate-400 hover:text-primary transition-colors" href="#">Điều khoản dịch vụ</a>
            </div>
        </div>
    </footer>